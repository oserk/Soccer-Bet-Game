{"version":3,"file":"resource-loader.cjs.js","sources":["../src/load_strategies/AbstractLoadStrategy.ts","../src/utilities.ts","../src/resource_type.ts","../src/load_strategies/MediaElementLoadStrategy.ts","../src/load_strategies/AudioLoadStrategy.ts","../src/load_strategies/ImageLoadStrategy.ts","../src/load_strategies/VideoLoadStrategy.ts","../src/load_strategies/XhrLoadStrategy.ts","../src/async/AsyncQueue.ts","../src/Resource.ts","../src/async/eachSeries.ts","../src/Loader.ts"],"sourcesContent":["import { Signal } from 'type-signals';\nimport { ResourceType } from '../resource_type';\n\nexport interface ILoadConfig\n{\n    // The url for this resource, relative to the baseUrl of this loader.\n    url: string;\n\n    // A base url to use for just this resource load. This can be passed in\n    // as the base url for a subresource if desired.\n    baseUrl?: string;\n\n    // String to use for crossOrigin properties on load elements.\n    crossOrigin?: string;\n\n    // The time to wait in milliseconds before considering the load a failure.\n    timeout?: number;\n}\n\n/**\n * @category Type Aliases\n */\nexport namespace AbstractLoadStrategy\n{\n    export type OnErrorSignal = (errMessage: string) => void;\n    export type OnCompleteSignal = (type: ResourceType, data: any) => void;\n    export type OnProgressSignal = (percent: number) => void;\n}\n\n/**\n * Base load strategy interface that all custom load strategies\n * are expected to inherit from and implement.\n * @preferred\n */\nexport abstract class AbstractLoadStrategy<C extends ILoadConfig = ILoadConfig>\n{\n    /**\n     * Dispatched when the resource fails to load.\n     */\n    readonly onError: Signal<AbstractLoadStrategy.OnErrorSignal> = new Signal<AbstractLoadStrategy.OnErrorSignal>();\n\n    /**\n     * Dispatched once this resource has loaded, if there was an error it will\n     * be in the `error` property.\n     */\n    readonly onComplete: Signal<AbstractLoadStrategy.OnCompleteSignal> = new Signal<AbstractLoadStrategy.OnCompleteSignal>();\n\n    /**\n     * Dispatched each time progress of this resource load updates.\n     * Not all resources types and loader systems can support this event\n     * so sometimes it may not be available. If the resource\n     * is being loaded on a modern browser, using XHR, and the remote server\n     * properly sets Content-Length headers, then this will be available.\n     */\n    readonly onProgress: Signal<AbstractLoadStrategy.OnProgressSignal> = new Signal<AbstractLoadStrategy.OnProgressSignal>();\n\n    constructor(readonly config: C)\n    { }\n\n    /**\n     * Load the resource described by `config`.\n     */\n    abstract load(): void;\n\n    /**\n     * Abort the loading of the resource.\n     */\n    abstract abort(): void;\n}\n\nexport type AbstractLoadStrategyCtor<C extends ILoadConfig = ILoadConfig> =\n    new (config: C) => AbstractLoadStrategy<C>;\n","export type Overwrite<T1, T2> = {\n    [P in Exclude<keyof T1, keyof T2>]: T1[P]\n} & T2;\n\n/**\n * Extracts the extension (sans '.') of the file being loaded by the resource.\n */\nexport function getExtension(url: string)\n{\n    const isDataUrl = url.indexOf('data:') === 0;\n    let ext = '';\n\n    if (isDataUrl)\n    {\n        const slashIndex = url.indexOf('/');\n\n        ext = url.substring(slashIndex + 1, url.indexOf(';', slashIndex));\n    }\n    else\n    {\n        const queryStart = url.indexOf('?');\n        const hashStart = url.indexOf('#');\n        const index = Math.min(\n            queryStart > -1 ? queryStart : url.length,\n            hashStart > -1 ? hashStart : url.length\n        );\n\n        url = url.substring(0, index);\n        ext = url.substring(url.lastIndexOf('.') + 1);\n    }\n\n    return ext.toLowerCase();\n}\n\nexport function assertNever(x: never): never\n{\n    throw new Error('Unexpected value. Should have been never.');\n}\n","/**\n * Describes the type of data the Resource holds.\n */\nexport enum ResourceType\n{\n    /** The resource data type is unknown. */\n    Unknown,\n    /** The resource data is an ArrayBuffer. */\n    Buffer,\n    /** The resource data is a Blob. */\n    Blob,\n    /** The resource data is a parsed JSON Object. */\n    Json,\n    /** The resource data is a Document or <div/> element representing parsed XML. */\n    Xml,\n    /** The resource data is an <img/> element. */\n    Image,\n    /** The resource data is an <audio/> element. */\n    Audio,\n    /** The resource data is an <video/> element. */\n    Video,\n    /** The resource data is a string. */\n    Text,\n}\n\nexport enum ResourceState\n{\n    NotStarted,\n    Loading,\n    Complete,\n}\n","import { AbstractLoadStrategy, ILoadConfig } from './AbstractLoadStrategy';\nimport { getExtension, assertNever } from '../utilities';\nimport { ResourceType } from '../resource_type';\n\nexport interface IMediaElementLoadConfig extends ILoadConfig\n{\n    sourceSet?: string[];\n    mimeTypes?: string[];\n    loadElement?: HTMLMediaElement;\n}\n\nexport abstract class MediaElementLoadStrategy extends AbstractLoadStrategy<IMediaElementLoadConfig>\n{\n    private _boundOnLoad = this._onLoad.bind(this);\n    private _boundOnError = this._onError.bind(this);\n    private _boundOnTimeout = this._onTimeout.bind(this);\n\n    private _element = this._createElement();\n    private _elementTimer = 0;\n\n    constructor(config: IMediaElementLoadConfig, readonly elementType: ('audio' | 'video'))\n    {\n        super(config);\n    }\n\n    load(): void\n    {\n        const config = this.config;\n\n        if (config.crossOrigin)\n            this._element.crossOrigin = config.crossOrigin;\n\n        const urls = config.sourceSet || [config.url];\n\n        // support for CocoonJS Canvas+ runtime, lacks document.createElement('source')\n        if ((navigator as any).isCocoonJS)\n        {\n            this._element.src = urls[0];\n        }\n        else\n        {\n            for (let i = 0; i < urls.length; ++i)\n            {\n                const url = urls[i];\n                let mimeType = config.mimeTypes ? config.mimeTypes[i] : undefined;\n\n                if (!mimeType)\n                    mimeType = `${this.elementType}/${getExtension(url)}`;\n\n                const source = document.createElement('source');\n\n                source.src = url;\n                source.type = mimeType;\n\n                this._element.appendChild(source);\n            }\n        }\n\n        this._element.addEventListener('load', this._boundOnLoad, false);\n        this._element.addEventListener('canplaythrough', this._boundOnLoad, false);\n        this._element.addEventListener('error', this._boundOnError, false);\n\n        this._element.load();\n\n        if (config.timeout)\n            this._elementTimer = window.setTimeout(this._boundOnTimeout, config.timeout);\n    }\n\n    abort(): void\n    {\n        this._clearEvents();\n        while (this._element.firstChild)\n        {\n            this._element.removeChild(this._element.firstChild);\n        }\n        this._error(`${this.elementType} load aborted by the user.`);\n    }\n\n    private _createElement(): HTMLMediaElement\n    {\n        if (this.config.loadElement)\n            return this.config.loadElement;\n        else\n            return document.createElement(this.elementType);\n    }\n\n    private _clearEvents(): void\n    {\n        clearTimeout(this._elementTimer);\n\n        this._element.removeEventListener('load', this._boundOnLoad, false);\n        this._element.removeEventListener('canplaythrough', this._boundOnLoad, false);\n        this._element.removeEventListener('error', this._boundOnError, false);\n    }\n\n    private _error(errMessage: string): void\n    {\n        this._clearEvents();\n        this.onError.dispatch(errMessage);\n    }\n\n    private _complete(): void\n    {\n        this._clearEvents();\n\n        let resourceType = ResourceType.Unknown;\n\n        switch (this.elementType)\n        {\n            case 'audio': resourceType = ResourceType.Audio; break;\n            case 'video': resourceType = ResourceType.Video; break;\n            default: assertNever(this.elementType);\n        }\n\n        this.onComplete.dispatch(resourceType, this._element);\n    }\n\n    private _onLoad(): void\n    {\n        this._complete();\n    }\n\n    private _onError(): void\n    {\n        this._error(`${this.elementType} failed to load.`);\n    }\n\n    private _onTimeout(): void\n    {\n        this._error(`${this.elementType} load timed out.`);\n    }\n}\n","import { MediaElementLoadStrategy, IMediaElementLoadConfig } from './MediaElementLoadStrategy';\n\nexport class AudioLoadStrategy extends MediaElementLoadStrategy\n{\n    constructor(config: IMediaElementLoadConfig)\n    {\n        super(config, 'audio');\n    }\n}\n","import { AbstractLoadStrategy, ILoadConfig } from './AbstractLoadStrategy';\nimport { ResourceType } from '../resource_type';\n\n// We can't set the `src` attribute to empty string, so on abort we set it to this 1px transparent gif\nconst EMPTY_GIF = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';\n\nexport interface IImageLoadConfig extends ILoadConfig\n{\n    loadElement?: HTMLImageElement;\n}\n\nexport class ImageLoadStrategy extends AbstractLoadStrategy<IImageLoadConfig>\n{\n    private _boundOnLoad = this._onLoad.bind(this);\n    private _boundOnError = this._onError.bind(this);\n    private _boundOnTimeout = this._onTimeout.bind(this);\n\n    private _element = this._createElement();\n    private _elementTimer = 0;\n\n    load(): void\n    {\n        const config = this.config;\n\n        if (config.crossOrigin)\n            this._element.crossOrigin = config.crossOrigin;\n\n        this._element.src = config.url;\n\n        this._element.addEventListener('load', this._boundOnLoad, false);\n        this._element.addEventListener('error', this._boundOnError, false);\n\n        if (config.timeout)\n            this._elementTimer = window.setTimeout(this._boundOnTimeout, config.timeout);\n    }\n\n    abort(): void\n    {\n        this._clearEvents();\n        this._element.src = EMPTY_GIF;\n        this._error('Image load aborted by the user.');\n    }\n\n    private _createElement(): HTMLImageElement\n    {\n        if (this.config.loadElement)\n            return this.config.loadElement;\n        else\n            return document.createElement('img')\n    }\n\n    private _clearEvents(): void\n    {\n        clearTimeout(this._elementTimer);\n\n        this._element.removeEventListener('load', this._boundOnLoad, false);\n        this._element.removeEventListener('error', this._boundOnError, false);\n    }\n\n    private _error(errMessage: string): void\n    {\n        this._clearEvents();\n        this.onError.dispatch(errMessage);\n    }\n\n    private _complete(): void\n    {\n        this._clearEvents();\n        this.onComplete.dispatch(ResourceType.Image, this._element);\n    }\n\n    private _onLoad(): void\n    {\n        this._complete();\n    }\n\n    private _onError(): void\n    {\n        this._error('Image failed to load.');\n    }\n\n    private _onTimeout(): void\n    {\n        this._error('Image load timed out.');\n    }\n}\n","import { MediaElementLoadStrategy, IMediaElementLoadConfig } from './MediaElementLoadStrategy';\n\nexport class VideoLoadStrategy extends MediaElementLoadStrategy\n{\n    constructor(config: IMediaElementLoadConfig)\n    {\n        super(config, 'video');\n    }\n}\n","import { AbstractLoadStrategy, ILoadConfig } from './AbstractLoadStrategy';\nimport { getExtension, assertNever } from '../utilities';\nimport { ResourceType } from '../resource_type';\n\n// tests if CORS is supported in XHR, if not we need to use XDR\n// Mainly this is for IE9 support.\nconst useXdr = !!((window as any).XDomainRequest && !('withCredentials' in (new XMLHttpRequest())));\n\nconst enum HttpStatus\n{\n    None = 0,\n    Ok = 200,\n    Empty = 204,\n    IeEmptyBug = 1223,\n}\n\n/**\n * The XHR response types.\n */\nexport enum XhrResponseType\n{\n    /** string */\n    Default     = 'text',\n    /** ArrayBuffer */\n    Buffer      = 'arraybuffer',\n    /** Blob */\n    Blob        = 'blob',\n    /** Document */\n    Document    = 'document',\n    /** Object */\n    Json        = 'json',\n    /** String */\n    Text        = 'text',\n};\n\nexport interface IXhrLoadConfig extends ILoadConfig\n{\n    xhrType?: XhrResponseType;\n}\n\n/**\n * Quick helper to get string xhr type.\n */\nfunction reqType(xhr: XMLHttpRequest): string\n{\n    return xhr.toString().replace('object ', '');\n}\n\nexport class XhrLoadStrategy extends AbstractLoadStrategy<IXhrLoadConfig>\n{\n    static readonly ResponseType = XhrResponseType;\n\n    private _boundOnLoad = this._onLoad.bind(this);\n    private _boundOnAbort = this._onAbort.bind(this);\n    private _boundOnError = this._onError.bind(this);\n    private _boundOnTimeout = this._onTimeout.bind(this);\n    private _boundOnProgress = this._onProgress.bind(this);\n\n    private _xhr = this._createRequest();\n    private _xhrType = XhrResponseType.Default;\n\n    load(): void\n    {\n        const config = this.config;\n        const ext = getExtension(config.url);\n\n        if (typeof config.xhrType !== 'string')\n        {\n            config.xhrType = this._determineXhrType(ext);\n        }\n\n        const xhr = this._xhr;\n\n        this._xhrType = config.xhrType || XhrResponseType.Default;\n\n        // XDomainRequest has a few quirks. Occasionally it will abort requests\n        // A way to avoid this is to make sure ALL callbacks are set even if not used\n        // More info here: http://stackoverflow.com/questions/15786966/xdomainrequest-aborts-post-on-ie-9\n\n        if (useXdr)\n        {\n            // XDR needs a timeout value or it breaks in IE9\n            xhr.timeout = config.timeout || 5000;\n\n            xhr.onload = this._boundOnLoad;\n            xhr.onerror = this._boundOnError;\n            xhr.ontimeout = this._boundOnTimeout;\n            xhr.onprogress = this._boundOnProgress;\n\n            xhr.open('GET', config.url, true);\n\n            // Note: The xdr.send() call is wrapped in a timeout to prevent an issue with\n            // the interface where some requests are lost if multiple XDomainRequests are\n            // being sent at the same time.\n            setTimeout(function () { xhr.send(); }, 0);\n        }\n        else\n        {\n            xhr.open('GET', config.url, true);\n\n            if (config.timeout)\n                xhr.timeout = config.timeout;\n\n            // load json as text and parse it ourselves. We do this because some browsers\n            // *cough* safari *cough* can't deal with it.\n            if (config.xhrType === XhrResponseType.Json || config.xhrType === XhrResponseType.Document)\n                xhr.responseType = XhrResponseType.Text;\n            else\n                xhr.responseType = config.xhrType;\n\n            xhr.addEventListener('load', this._boundOnLoad, false);\n            xhr.addEventListener('abort', this._boundOnAbort, false);\n            xhr.addEventListener('error', this._boundOnError, false);\n            xhr.addEventListener('timeout', this._boundOnTimeout, false);\n            xhr.addEventListener('progress', this._boundOnProgress, false);\n\n            xhr.send();\n        }\n    }\n\n    abort(): void\n    {\n        if (useXdr)\n        {\n            this._clearEvents();\n            this._xhr.abort();\n            this._onAbort();\n        }\n        else\n        {\n            // will call the abort event\n            this._xhr.abort();\n        }\n    }\n\n    private _createRequest(): XMLHttpRequest\n    {\n        if (useXdr)\n            return new (window as any).XDomainRequest();\n        else\n            return new XMLHttpRequest();\n    }\n\n    private _determineXhrType(ext: string): XhrResponseType\n    {\n        return XhrLoadStrategy._xhrTypeMap[ext] || XhrResponseType.Default;\n    }\n\n    private _clearEvents(): void\n    {\n        if (useXdr)\n        {\n            this._xhr.onload = null;\n            this._xhr.onerror = null;\n            this._xhr.ontimeout = null;\n            this._xhr.onprogress = null;\n        }\n        else\n        {\n            this._xhr.removeEventListener('load', this._boundOnLoad, false);\n            this._xhr.removeEventListener('abort', this._boundOnAbort, false);\n            this._xhr.removeEventListener('error', this._boundOnError, false);\n            this._xhr.removeEventListener('timeout', this._boundOnTimeout, false);\n            this._xhr.removeEventListener('progress', this._boundOnProgress, false);\n        }\n    }\n\n    private _error(errMessage: string): void\n    {\n        this._clearEvents();\n        this.onError.dispatch(errMessage);\n    }\n\n    private _complete(type: ResourceType, data: any): void\n    {\n        this._clearEvents();\n        this.onComplete.dispatch(type, data);\n    }\n\n    private _onLoad(): void\n    {\n        const xhr = this._xhr;\n        let text = '';\n\n        // XDR has no `.status`, assume 200.\n        let status = typeof xhr.status === 'undefined' ? HttpStatus.Ok : xhr.status;\n\n        // responseText is accessible only if responseType is '' or 'text' and on older browsers\n        if (typeof xhr.responseType === 'undefined' || xhr.responseType === '' || xhr.responseType === 'text')\n        {\n            text = xhr.responseText;\n        }\n\n        // status can be 0 when using the `file://` protocol so we also check if a response is set.\n        // If it has a response, we assume 200; otherwise a 0 status code with no contents is an aborted request.\n        if (status === HttpStatus.None && (text.length > 0 || xhr.responseType === XhrResponseType.Buffer))\n        {\n            status = HttpStatus.Ok;\n        }\n        // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n        else if (status === HttpStatus.IeEmptyBug)\n        {\n            status = HttpStatus.Empty;\n        }\n\n        const flattenedStatus = Math.floor(status / 100) * 100;\n\n        if (flattenedStatus !== HttpStatus.Ok)\n        {\n            this._error(`[${xhr.status}] ${xhr.statusText}: ${xhr.responseURL}`);\n            return;\n        }\n\n        switch (this._xhrType)\n        {\n            case XhrResponseType.Buffer:\n                this._complete(ResourceType.Buffer, xhr.response);\n                break;\n\n            case XhrResponseType.Blob:\n                this._complete(ResourceType.Blob, xhr.response);\n                break;\n\n            case XhrResponseType.Document:\n                this._parseDocument(text);\n                break;\n\n            case XhrResponseType.Json:\n                this._parseJson(text);\n                break;\n\n            case XhrResponseType.Default:\n            case XhrResponseType.Text:\n                this._complete(ResourceType.Text, text);\n                break;\n\n            default:\n                assertNever(this._xhrType);\n        }\n    }\n\n    private _parseDocument(text: string): void\n    {\n        try\n        {\n            if (window.DOMParser)\n            {\n                const parser = new DOMParser();\n                const data = parser.parseFromString(text, 'text/xml');\n                this._complete(ResourceType.Xml, data);\n            }\n            else\n            {\n                const div = document.createElement('div');\n                div.innerHTML = text;\n                this._complete(ResourceType.Xml, div);\n            }\n        }\n        catch (e)\n        {\n            this._error(`Error trying to parse loaded xml: ${e}`);\n        }\n    }\n\n    private _parseJson(text: string): void\n    {\n        try\n        {\n            const data = JSON.parse(text);\n            this._complete(ResourceType.Json, data);\n        }\n        catch (e)\n        {\n            this._error(`Error trying to parse loaded json: ${e}`);\n        }\n    }\n\n    private _onAbort(): void\n    {\n        const xhr = this._xhr;\n        this._error(`${reqType(xhr)} Request was aborted by the user.`);\n    }\n\n    private _onError(): void\n    {\n        const xhr = this._xhr;\n        this._error(`${reqType(xhr)} Request failed. Status: ${xhr.status}, text: \"${xhr.statusText}\"`);\n    }\n\n    private _onTimeout(): void\n    {\n        const xhr = this._xhr;\n        this._error(`${reqType(xhr)} Request timed out.`);\n    }\n\n    private _onProgress(event: ProgressEvent): void\n    {\n        if (event && event.lengthComputable)\n        {\n            this.onProgress.dispatch(event.loaded / event.total);\n        }\n    }\n\n    /**\n     * Sets the load type to be used for a specific extension.\n     *\n     * @param extname The extension to set the type for, e.g. \"png\" or \"fnt\"\n     * @param xhrType The xhr type to set it to.\n     */\n    static setExtensionXhrType(extname: string, xhrType: XhrResponseType)\n    {\n        if (extname && extname.indexOf('.') === 0)\n            extname = extname.substring(1);\n\n        if (!extname)\n            return;\n\n        XhrLoadStrategy._xhrTypeMap[extname] = xhrType;\n    }\n\n    private static _xhrTypeMap: Partial<Record<string, XhrResponseType>> = {\n        // xml\n        xhtml:      XhrResponseType.Document,\n        html:       XhrResponseType.Document,\n        htm:        XhrResponseType.Document,\n        xml:        XhrResponseType.Document,\n        tmx:        XhrResponseType.Document,\n        svg:        XhrResponseType.Document,\n\n        // This was added to handle Tiled Tileset XML, but .tsx is also a TypeScript React Component.\n        // Since it is way less likely for people to be loading TypeScript files instead of Tiled files,\n        // this should probably be fine.\n        tsx:        XhrResponseType.Document,\n\n        // images\n        gif:        XhrResponseType.Blob,\n        png:        XhrResponseType.Blob,\n        bmp:        XhrResponseType.Blob,\n        jpg:        XhrResponseType.Blob,\n        jpeg:       XhrResponseType.Blob,\n        tif:        XhrResponseType.Blob,\n        tiff:       XhrResponseType.Blob,\n        webp:       XhrResponseType.Blob,\n        tga:        XhrResponseType.Blob,\n\n        // json\n        json:       XhrResponseType.Json,\n\n        // text\n        text:       XhrResponseType.Text,\n        txt:        XhrResponseType.Text,\n\n        // fonts\n        ttf:        XhrResponseType.Buffer,\n        otf:        XhrResponseType.Buffer,\n    };\n}\n","import { Signal } from 'type-signals';\n\n/**\n * Ensures a function is only called once.\n *\n * @ignore\n * @typeparam R Return type of the function to wrap.\n * @param func The function to wrap.\n * @return The wrapping function.\n */\nfunction onlyOnce<R>(func: (...args: any[]) => R): (...args: any[]) => R\n{\n    let fn: typeof func | null = func;\n\n    return function onceWrapper(this: any, ...args: any[])\n    {\n        if (fn === null)\n            throw new Error('Callback was already called.');\n\n        const callFn = fn;\n        fn = null;\n        return callFn.apply(this, args);\n    };\n}\n\nexport type INext = (err?: Error) => void;\nexport type IWorker<T> = (item: T, next: INext) => void;\nexport type IItemCallback = (...args: any[]) => void;\n\nexport type OnDoneSignal = () => void;\nexport type OnSaturatedSignal = () => void;\nexport type OnUnsaturatedSignal = () => void;\nexport type OnEmptySignal = () => void;\nexport type OnDrainSignal = () => void;\nexport type OnErrorSignal<T> = (err: Error, data: T) => void;\n\ninterface ITask<T>\n{\n    data: T;\n    callback?: IItemCallback;\n}\n\n/**\n * Async queue.\n *\n * @typeparam T Element type of the queue.\n * @param worker The worker function to call for each task.\n * @param concurrency How many workers to run in parrallel. Must be greater than 0.\n * @return The async queue object.\n */\nexport class AsyncQueue<T>\n{\n    private workers = 0;\n    private buffer = 0;\n    private paused = false;\n\n    private _started = false;\n    private _tasks: ITask<T>[] = [];\n\n    readonly onSaturated: Signal<OnSaturatedSignal> = new Signal<OnSaturatedSignal>();\n    readonly onUnsaturated: Signal<OnUnsaturatedSignal> = new Signal<OnUnsaturatedSignal>();\n    readonly onEmpty: Signal<OnEmptySignal> = new Signal<OnEmptySignal>();\n    readonly onDrain: Signal<OnDrainSignal> = new Signal<OnDrainSignal>();\n    readonly onError: Signal<OnErrorSignal<T>> = new Signal<OnErrorSignal<T>>();\n\n    constructor(readonly worker: IWorker<T>, public concurrency = 1)\n    {\n        if (concurrency === 0)\n            throw new Error('Concurrency must not be zero');\n\n        this.buffer = concurrency / 4;\n    }\n\n    get started() { return this._started; }\n\n    reset()\n    {\n        this.onDrain.detachAll();\n        this.workers = 0;\n        this._started = false;\n        this._tasks = [];\n    }\n\n    push(data: T, callback?: IItemCallback)\n    {\n        this._insert(data, false, callback);\n    }\n\n    unshift(data: T, callback?: IItemCallback)\n    {\n        this._insert(data, true, callback);\n    }\n\n    process()\n    {\n        while (!this.paused && this.workers < this.concurrency && this._tasks.length)\n        {\n            const task = this._tasks.shift()!;\n\n            if (this._tasks.length === 0)\n                this.onEmpty.dispatch();\n\n            this.workers += 1;\n\n            if (this.workers === this.concurrency)\n                this.onSaturated.dispatch();\n\n            this.worker(task.data, onlyOnce(this._next(task)));\n        }\n    }\n\n    length()\n    {\n        return this._tasks.length;\n    }\n\n    running()\n    {\n        return this.workers;\n    }\n\n    idle()\n    {\n        return this._tasks.length + this.workers === 0;\n    }\n\n    pause()\n    {\n        if (this.paused === true)\n            return;\n\n        this.paused = true;\n    }\n\n    resume()\n    {\n        if (this.paused === false)\n            return;\n\n        this.paused = false;\n\n        // Need to call this.process once per concurrent\n        // worker to preserve full concurrency after pause\n        for (let w = 1; w <= this.concurrency; w++)\n        {\n            this.process();\n        }\n    }\n\n    getTask(index: number): ITask<T>\n    {\n        return this._tasks[index];\n    }\n\n    private _insert(data: T, insertAtFront: boolean, callback?: IItemCallback)\n    {\n        if (callback != null && typeof callback !== 'function')\n        {\n            throw new Error('task callback must be a function');\n        }\n\n        this._started = true;\n\n        if (data == null && this.idle())\n        {\n            // call drain immediately if there are no tasks\n            setTimeout(() => this.onDrain.dispatch(), 1);\n            return;\n        }\n\n        const task: ITask<T> = { data, callback };\n\n        if (insertAtFront)\n            this._tasks.unshift(task);\n        else\n            this._tasks.push(task);\n\n        setTimeout(() => this.process(), 1);\n    }\n\n    private _next(task: ITask<T>)\n    {\n        return (err?: Error, ...args: any[]) =>\n        {\n            this.workers -= 1;\n\n            if (task.callback)\n                task.callback(err, ...args);\n\n            if (err)\n                this.onError.dispatch(err, task.data);\n\n            if (this.workers <= (this.concurrency - this.buffer))\n                this.onUnsaturated.dispatch();\n\n            if (this.idle())\n                this.onDrain.dispatch();\n\n            this.process();\n        };\n    }\n}\n","import parseUri from 'parse-uri';\nimport { Signal, SignalBinding } from 'type-signals';\nimport { AbstractLoadStrategy, ILoadConfig, AbstractLoadStrategyCtor } from './load_strategies/AbstractLoadStrategy';\nimport { ImageLoadStrategy } from './load_strategies/ImageLoadStrategy';\nimport { AudioLoadStrategy } from './load_strategies/AudioLoadStrategy';\nimport { VideoLoadStrategy } from './load_strategies/VideoLoadStrategy';\nimport { XhrLoadStrategy } from './load_strategies/XhrLoadStrategy';\nimport { ResourceType, ResourceState } from './resource_type';\nimport { getExtension } from './utilities';\n\nexport interface IResourceOptions extends ILoadConfig\n{\n    // OVerride the load strategy to use for this one resource.\n    strategy?: AbstractLoadStrategy | AbstractLoadStrategyCtor;\n\n    // Extra info added by the user, usually for middleware.\n    metadata?: any;\n}\n\n/**\n * @category Type Aliases\n */\nexport namespace Resource\n{\n    export type OnStartSignal = (resource: Resource) => void;\n    export type OnErrorSignal = (resource: Resource) => void;\n    export type OnCompleteSignal = (resource: Resource) => void;\n    export type OnProgressSignal = (resource: Resource, percent: number) => void;\n}\n\n/**\n * Manages the state and loading of a resource and all child resources.\n * @preferred\n */\nexport class Resource\n{\n    private static _tempAnchor: HTMLAnchorElement | null = null;\n\n    private static _defaultLoadStrategy: AbstractLoadStrategyCtor = XhrLoadStrategy;\n    private static _loadStrategyMap: Partial<Record<string, AbstractLoadStrategyCtor>> = {\n        // images\n        gif:        ImageLoadStrategy,\n        png:        ImageLoadStrategy,\n        bmp:        ImageLoadStrategy,\n        jpg:        ImageLoadStrategy,\n        jpeg:       ImageLoadStrategy,\n        tif:        ImageLoadStrategy,\n        tiff:       ImageLoadStrategy,\n        webp:       ImageLoadStrategy,\n        tga:        ImageLoadStrategy,\n        svg:        ImageLoadStrategy,\n        'svg+xml':  ImageLoadStrategy, // for SVG data urls\n\n        // audio\n        mp3:        AudioLoadStrategy,\n        ogg:        AudioLoadStrategy,\n        wav:        AudioLoadStrategy,\n\n        // videos\n        mp4:        VideoLoadStrategy,\n        webm:       VideoLoadStrategy,\n        mov:        VideoLoadStrategy,\n    };\n\n    /**\n     * Sets the default load stragety to use when there is no extension-specific strategy.\n     */\n    static setDefaultLoadStrategy(strategy: AbstractLoadStrategyCtor): void\n    {\n        Resource._defaultLoadStrategy = strategy;\n    }\n\n    /**\n     * Sets the load strategy to be used for a specific extension.\n     *\n     * @param extname The extension to set the type for, e.g. \"png\" or \"fnt\"\n     * @param strategy The load strategy to use for loading resources with that extension.\n     */\n    static setLoadStrategy(extname: string, strategy: AbstractLoadStrategyCtor): void\n    {\n        if (extname && extname.indexOf('.') === 0)\n            extname = extname.substring(1);\n\n        if (!extname)\n            return;\n\n        Resource._loadStrategyMap[extname] = strategy;\n    }\n\n    /**\n     * The name of this resource.\n     */\n    readonly name: string;\n\n    /**\n     * The child resources of this resource.\n     */\n    readonly children: Resource[] = [];\n\n    /**\n     * Dispatched when the resource beings to load.\n     */\n    readonly onStart: Signal<Resource.OnStartSignal> = new Signal<Resource.OnStartSignal>();\n\n    /**\n     * Dispatched each time progress of this resource load updates.\n     * Not all resources types and loader systems can support this event\n     * so sometimes it may not be available. If the resource\n     * is being loaded on a modern browser, using XHR, and the remote server\n     * properly sets Content-Length headers, then this will be available.\n     */\n    readonly onProgress: Signal<Resource.OnProgressSignal> = new Signal<Resource.OnProgressSignal>();\n\n    /**\n     * Dispatched once this resource has loaded, if there was an error it will\n     * be in the `error` property.\n     */\n    readonly onComplete: Signal<Resource.OnCompleteSignal> = new Signal<Resource.OnCompleteSignal>();\n\n    /**\n     * Dispatched after this resource has had all the *after* middleware run on it.\n     */\n    readonly onAfterMiddleware: Signal<Resource.OnCompleteSignal> = new Signal<Resource.OnCompleteSignal>();\n\n    /**\n     * The data that was loaded by the resource. The type of this member is\n     * described by the `type` member.\n     */\n    data: any = null;\n\n    /**\n     * Extra info added by the user, usually for middleware.\n     */\n    metadata: any;\n\n    /**\n     * Describes the type of the `data` member for this resource.\n     *\n     * @see ResourceType\n     */\n    type = ResourceType.Unknown;\n\n    /**\n     * The error that occurred while loading (if any).\n     */\n    error = '';\n\n    /**\n     * The progress chunk owned by this resource.\n     */\n    progressChunk = 0;\n\n    /**\n     * Storage for use privately by the Loader.\n     * Do not touch this member.\n     *\n     * @ignore\n     */\n    _dequeue: Function = function () {};\n\n    /**\n     * Storage for use privately by the Loader.\n     * Do not touch this member.\n     *\n     * @ignore\n     */\n    _onCompleteBinding: SignalBinding<Resource.OnCompleteSignal> | null = null;\n\n    private _strategy: AbstractLoadStrategy;\n    private _state = ResourceState.NotStarted;\n\n    /**\n     * @param name The name of the resource to load.\n     * @param options The options for the load strategy that will be used.\n     */\n    constructor(name: string, options: IResourceOptions)\n    {\n        this.name = name;\n        this.metadata = options.metadata;\n\n        if (typeof options.crossOrigin !== 'string')\n            options.crossOrigin = this._determineCrossOrigin(options.url);\n\n        if (options.strategy && typeof options.strategy !== 'function')\n        {\n            this._strategy = options.strategy;\n\n            // Only `Resource` is allowed to set the config object,\n            // it is otherwise readonly.\n            (this._strategy as any).config = options;\n        }\n        else\n        {\n            let StrategyCtor = options.strategy;\n\n            if (!StrategyCtor)\n                StrategyCtor = Resource._loadStrategyMap[getExtension(options.url)];\n\n            if (!StrategyCtor)\n                StrategyCtor = Resource._defaultLoadStrategy;\n\n            this._strategy = new StrategyCtor(options);\n        }\n\n        this._strategy.onError.add(this._error, this);\n        this._strategy.onComplete.add(this._complete, this);\n        this._strategy.onProgress.add(this._progress, this);\n    }\n\n    get strategy(): AbstractLoadStrategy { return this._strategy; }\n    get url(): string { return this._strategy.config.url; }\n    get isLoading(): boolean { return this._state === ResourceState.Loading; }\n    get isComplete(): boolean { return this._state === ResourceState.Complete; }\n\n    /**\n     * Aborts the loading of the resource.\n     */\n    abort(): void\n    {\n        this._strategy.abort();\n    }\n\n    /**\n     * Kicks off loading of this resource.\n     */\n    load(): void\n    {\n        this._state = ResourceState.Loading;\n        this.onStart.dispatch(this);\n        this._strategy.load();\n    }\n\n    private _error(errMessage: string): void\n    {\n        this._state = ResourceState.Complete;\n        this.error = errMessage;\n        this.onComplete.dispatch(this);\n    }\n\n    private _complete(type: ResourceType, data: any): void\n    {\n        this._state = ResourceState.Complete;\n        this.type = type;\n        this.data = data;\n        this.onComplete.dispatch(this);\n    }\n\n    private _progress(percent: number): void\n    {\n        this.onProgress.dispatch(this, percent);\n    }\n\n    /**\n     * Determines if a URL is crossOrigin, and if so returns the crossOrigin string.\n     */\n    private _determineCrossOrigin(url: string, loc = window.location): string\n    {\n        // data: and javascript: urls are considered same-origin\n        if (url.indexOf('data:') === 0 || url.indexOf('javascript:') === 0)\n            return '';\n\n        // A sandboxed iframe without the 'allow-same-origin' attribute will have a special\n        // origin designed not to match window.location.origin, and will always require\n        // crossOrigin requests regardless of whether the location matches.\n        if (window.origin !== window.location.origin)\n            return 'anonymous';\n\n        if (!Resource._tempAnchor)\n            Resource._tempAnchor = document.createElement('a');\n\n        // Let the browser determine the full href for the url and then parse with the\n        // url lib. We can't use the properties of the anchor element because they\n        // don't work in IE9 :(\n        Resource._tempAnchor.href = url;\n\n        const parsed = parseUri(Resource._tempAnchor.href, { strictMode: true });\n\n        const samePort = (!parsed.port && loc.port === '') || (parsed.port === loc.port);\n        const protocol = parsed.protocol ? `${parsed.protocol}:` : '';\n\n        // if cross origin\n        if (parsed.host !== loc.hostname || !samePort || protocol !== loc.protocol)\n            return 'anonymous';\n\n        return '';\n    }\n}\n","/**\n * Iterates an array in series.\n *\n * @typeparam T Element type of the array.\n * @param array Array to iterate.\n * @param iterator Function to call for each element.\n * @param callback Function to call when done, or on error.\n * @param deferNext Break synchronous each loop by calling next with a setTimeout of 1.\n */\nexport function eachSeries<T>(\n    array: T[],\n    iterator: (item: T, next: (err?: Error) => void) => void,\n    callback?: (err?: Error) => void,\n    deferNext = false) : void\n{\n    let i = 0;\n    const len = array.length;\n\n    (function next(err?: Error)\n    {\n        if (err || i === len)\n        {\n            if (callback)\n                callback(err);\n            return;\n        }\n\n        if (deferNext)\n            setTimeout(() => iterator(array[i++], next), 1);\n        else\n            iterator(array[i++], next);\n    })();\n}\n","import parseUri from 'parse-uri';\nimport { Signal } from 'type-signals';\nimport { AsyncQueue } from './async/AsyncQueue';\nimport { Resource, IResourceOptions } from './Resource';\nimport { eachSeries } from './async/eachSeries';\n\n// some constants\nconst MAX_PROGRESS = 100;\nconst rgxExtractUrlHash = /(#[\\w-]+)?$/;\n\n/**\n * @category Type Aliases\n */\nexport namespace Loader\n{\n    export type ResourceMap = Partial<Record<string, Resource>>;\n\n    export type OnProgressSignal = (loader: Loader, resource: Resource) => void;\n    export type OnErrorSignal = (errMessage: string, loader: Loader, resource: Resource) => void;\n    export type OnLoadSignal = (loader: Loader, resource: Resource) => void;\n    export type OnStartSignal = (loader: Loader) => void;\n    export type OnCompleteSignal = (loader: Loader, resources: ResourceMap) => void;\n\n    export type MiddlewareFn = (resource: Resource, next: () => void) => void;\n    export type UrlResolverFn = (url: string, parsed: ReturnType<typeof parseUri>) => string;\n}\n\ninterface Middleware\n{\n    fn: Loader.MiddlewareFn;\n    priority: number;\n}\n\n/**\n * Options for a call to `.add()`.\n */\nexport interface IAddOptions extends IResourceOptions\n{\n    // Extra values to be used by specific load strategies.\n    [key: string]: any;\n\n    // The url to load the resource from.\n    url: string;\n\n    // A base url to use for just this resource load.\n    baseUrl?: string;\n\n    // The name of the resource to load, if not passed the url is used.\n    name?: string;\n\n    // Callback to add an an onComplete signal istener.\n    onComplete?: Resource.OnCompleteSignal;\n\n    // Parent resource this newly added resource is a child of.\n    parentResource?: Resource;\n}\n\n/**\n * Manages the state and loading of multiple resources to load.\n * @preferred\n */\nexport class Loader\n{\n    /**\n     * The default middleware priority (50).\n     */\n    static readonly DefaultMiddlewarePriority = 50;\n\n    /**\n     * The progress percent of the loader going through the queue.\n     */\n    progress = 0;\n\n    /**\n     * Loading state of the loader, true if it is currently loading resources.\n     */\n    loading = false;\n\n    /**\n     * A querystring to append to every URL added to the loader.\n     *\n     * This should be a valid query string *without* the question-mark (`?`). The loader will\n     * also *not* escape values for you. Make sure to escape your parameters with\n     * [`encodeURIComponent`](https://mdn.io/encodeURIComponent) before assigning this property.\n     *\n     * @example\n     * const loader = new Loader();\n     *\n     * loader.defaultQueryString = 'user=me&password=secret';\n     *\n     * // This will request 'image.png?user=me&password=secret'\n     * loader.add('image.png').load();\n     *\n     * loader.reset();\n     *\n     * // This will request 'image.png?v=1&user=me&password=secret'\n     * loader.add('iamge.png?v=1').load();\n     */\n    defaultQueryString = '';\n\n    /**\n     * All the resources for this loader keyed by name, or URL if no name was given.\n     */\n    resources: Loader.ResourceMap = {};\n\n    /**\n     * Dispatched once per errored resource.\n     */\n    readonly onError: Signal<Loader.OnErrorSignal> = new Signal<Loader.OnErrorSignal>();\n\n    /**\n     * Dispatched once per loaded resource.\n     */\n    readonly onLoad: Signal<Loader.OnLoadSignal> = new Signal<Loader.OnLoadSignal>();\n\n    /**\n     * Dispatched when the loader begins to process the queue.\n     */\n    readonly onStart: Signal<Loader.OnStartSignal> = new Signal<Loader.OnStartSignal>();\n\n    /**\n     * Dispatched when the queued resources all load.\n     */\n    readonly onComplete: Signal<Loader.OnCompleteSignal> = new Signal<Loader.OnCompleteSignal>();\n\n    /**\n     * Dispatched once per loaded or errored resource.\n     */\n    readonly onProgress: Signal<Loader.OnProgressSignal> = new Signal<Loader.OnProgressSignal>();\n\n    /**\n     * The base url for all resources loaded by this loader.\n     */\n    private _baseUrl = '';\n\n    /**\n     * The internal list of URL resolver functions called within `_prepareUrl`.\n     */\n    private _urlResolvers: Loader.UrlResolverFn[] = [];\n\n    /**\n     * The middleware to run after loading each resource.\n     */\n    private _middleware: Middleware[] = [];\n\n    /**\n     * The tracks the resources we are currently completing parsing for.\n     */\n    private _resourcesParsing: Resource[] = [];\n\n    /**\n     * The `_loadResource` function bound with this object context.\n     */\n    private _boundLoadResource = this._loadResource.bind(this);\n\n    /**\n     * The resources waiting to be loaded.\n     */\n    private _queue: AsyncQueue<Resource>;\n\n    /**\n     * @param baseUrl The base url for all resources loaded by this loader.\n     * @param concurrency The number of resources to load concurrently.\n     */\n    constructor(baseUrl = '', concurrency = 10)\n    {\n        this.baseUrl = baseUrl;\n\n        this._queue = new AsyncQueue<Resource>(this._boundLoadResource, concurrency);\n        this._queue.pause();\n\n        // Add default middleware. This is already sorted so no need to do that again.\n        this._middleware = Loader._defaultMiddleware.slice();\n    }\n\n    /**\n     * The base url for all resources loaded by this loader.\n     * Any trailing slashes are trimmed off.\n     */\n    get baseUrl(): string { return this._baseUrl; }\n\n    set baseUrl(url: string)\n    {\n        while (url.length && url.charAt(url.length - 1) === '/')\n        {\n            url = url.slice(0, -1);\n        }\n\n        this._baseUrl = url;\n    }\n\n    /**\n     * Adds a resource (or multiple resources) to the loader queue.\n     *\n     * This function can take a wide variety of different parameters. The only thing that is always\n     * required the url to load. All the following will work:\n     *\n     * ```js\n     * loader\n     *     // name & url param syntax\n     *     .add('http://...')\n     *     .add('key', 'http://...')\n     *\n     *     // object syntax\n     *     .add({\n     *         name: 'key3',\n     *         url: 'http://...',\n     *         onComplete: function () {},\n     *     })\n     *\n     *     // you can also pass an array of objects or urls or both\n     *     .add([\n     *         { name: 'key4', url: 'http://...', onComplete: function () {} },\n     *         { url: 'http://...', onComplete: function () {} },\n     *         'http://...'\n     *     ])\n     * ```\n     */\n    add(url: string): this;\n    add(name: string, url: string): this;\n    add(options: IAddOptions): this;\n    add(resources: (IAddOptions|string)[]): this;\n    add(options: string | IAddOptions | (string | IAddOptions)[], url_?: string): this\n    {\n        // An array is a resource list.\n        if (Array.isArray(options))\n        {\n            for (let i = 0; i < options.length; ++i)\n            {\n                // can be string or IAddOptions, but either one is fine to pass\n                // as a param alone. The type assertion is just to appease TS.\n                this.add(options[i] as string);\n            }\n\n            return this;\n        }\n\n        let url = '';\n        let name = '';\n        let baseUrl = this._baseUrl;\n        let resOptions: IAddOptions = { url: '' };\n\n        if (typeof options === 'object')\n        {\n            url = options.url;\n            name = options.name || options.url;\n            baseUrl = options.baseUrl || baseUrl;\n            resOptions = options;\n        }\n        else\n        {\n            name = options;\n\n            if (typeof url_ === 'string')\n                url = url_;\n            else\n                url = name;\n        }\n\n        if (!url)\n            throw new Error('You must specify the `url` property.');\n\n        // if loading already you can only add resources that have a parent.\n        if (this.loading && !resOptions.parentResource)\n        {\n            throw new Error('Cannot add root resources while the loader is running.');\n        }\n\n        // check if resource already exists.\n        if (this.resources[name])\n        {\n            throw new Error(`Resource named \"${name}\" already exists.`);\n        }\n\n        // add base url if this isn't an absolute url\n        url = this._prepareUrl(url, baseUrl);\n        resOptions.url = url;\n\n        const resource = new Resource(name, resOptions);\n\n        this.resources[name] = resource;\n\n        if (typeof resOptions.onComplete === 'function')\n        {\n            resource.onAfterMiddleware.once(resOptions.onComplete);\n        }\n\n        // if actively loading, make sure to adjust progress chunks for that parent and its children\n        if (this.loading)\n        {\n            const parent = resOptions.parentResource!;\n            const incompleteChildren: Resource[] = [];\n\n            for (let i = 0; i < parent.children.length; ++i)\n            {\n                if (!parent.children[i].isComplete)\n                {\n                    incompleteChildren.push(parent.children[i]);\n                }\n            }\n\n            const fullChunk = parent.progressChunk * (incompleteChildren.length + 1); // +1 for parent\n            const eachChunk = fullChunk / (incompleteChildren.length + 2); // +2 for parent & new child\n\n            parent.children.push(resource);\n            parent.progressChunk = eachChunk;\n\n            for (let i = 0; i < incompleteChildren.length; ++i)\n            {\n                incompleteChildren[i].progressChunk = eachChunk;\n            }\n\n            resource.progressChunk = eachChunk;\n        }\n\n        // add the resource to the queue\n        this._queue.push(resource);\n\n        return this;\n    }\n\n    /**\n     * Sets up a middleware function that will run *after* the\n     * resource is loaded.\n     *\n     * You can optionally specify a priority for this middleware\n     * which will determine the order middleware functions are run.\n     * A lower priority value will make the function run earlier.\n     * That is, priority 30 is run before priority 50.\n     */\n    use(fn: Loader.MiddlewareFn, priority: number = Loader.DefaultMiddlewarePriority): this\n    {\n        this._middleware.push({ fn, priority });\n        this._middleware.sort((a, b) => a.priority - b.priority);\n        return this;\n    }\n\n    /**\n     * Resets the queue of the loader to prepare for a new load.\n     */\n    reset(): this\n    {\n        this.progress = 0;\n        this.loading = false;\n\n        this._queue.reset();\n        this._queue.pause();\n\n        // abort all resource loads\n        for (const k in this.resources)\n        {\n            const res = this.resources[k];\n\n            if (!res)\n                continue;\n\n            if (res._onCompleteBinding)\n                res._onCompleteBinding.detach();\n\n            if (res.isLoading)\n                res.abort();\n        }\n\n        this.resources = {};\n\n        return this;\n    }\n\n    /**\n     * Starts loading the queued resources.\n     */\n    load(cb?: Loader.OnCompleteSignal): this\n    {\n        if (typeof cb === 'function')\n            this.onComplete.once(cb);\n\n        // if the queue has already started we are done here\n        if (this.loading)\n            return this;\n\n        if (this._queue.idle())\n        {\n            this._onStart();\n            this._onComplete();\n        }\n        else\n        {\n            // distribute progress chunks\n            const numTasks = this._queue.length();\n            const chunk = MAX_PROGRESS / numTasks;\n\n            for (let i = 0; i < this._queue.length(); ++i)\n            {\n                this._queue.getTask(i).data.progressChunk = chunk;\n            }\n\n            // notify we are starting\n            this._onStart();\n\n            // start loading\n            this._queue.resume();\n        }\n\n        return this;\n    }\n\n    /**\n     * The number of resources to load concurrently.\n     */\n    get concurrency(): number\n    {\n        return this._queue.concurrency;\n    }\n\n    set concurrency(concurrency)\n    {\n        this._queue.concurrency = concurrency;\n    }\n\n    /**\n     * Add a function that can be used to modify the url just prior\n     * to `baseUrl` and `defaultQueryString` being applied.\n     */\n    addUrlResolver(func: Loader.UrlResolverFn): this\n    {\n        this._urlResolvers.push(func);\n        return this;\n    }\n\n    /**\n     * Prepares a url for usage based on the configuration of this object\n     */\n    private _prepareUrl(url: string, baseUrl: string): string\n    {\n        let parsed = parseUri(url, { strictMode: true });\n\n        this._urlResolvers.forEach(resolver => {\n            url = resolver(url, parsed);\n            parsed = parseUri(url, { strictMode: true });\n        });\n\n        // Only add `baseUrl` for urls that are not absolute.\n        if (!parsed.protocol && url.indexOf('//') !== 0)\n        {\n            // if the url doesn't start with a slash, then add one inbetween.\n            if (baseUrl.length && url.charAt(0) !== '/')\n                url = `${baseUrl}/${url}`;\n            else\n                url = baseUrl + url;\n        }\n\n        // if we need to add a default querystring, there is a bit more work\n        if (this.defaultQueryString)\n        {\n            const match = rgxExtractUrlHash.exec(url);\n\n            if (match)\n            {\n                const hash = match[0];\n\n                url = url.substr(0, url.length - hash.length);\n\n                if (url.indexOf('?') !== -1)\n                    url += `&${this.defaultQueryString}`;\n                else\n                    url += `?${this.defaultQueryString}`;\n\n                url += hash;\n            }\n        }\n\n        return url;\n    }\n\n    /**\n     * Loads a single resource.\n     */\n    private _loadResource(resource: Resource, dequeue: Function): void\n    {\n        resource._dequeue = dequeue;\n        resource._onCompleteBinding = resource.onComplete.once(this._onLoad, this);\n        resource.load();\n    }\n\n    /**\n     * Called once loading has started.\n     */\n    private _onStart(): void\n    {\n        this.progress = 0;\n        this.loading = true;\n        this.onStart.dispatch(this);\n    }\n\n    /**\n     * Called once each resource has loaded.\n     */\n    private _onComplete(): void\n    {\n        this.progress = MAX_PROGRESS;\n        this.loading = false;\n        this.onComplete.dispatch(this, this.resources);\n    }\n\n    /**\n     * Called each time a resources is loaded.\n     */\n    private _onLoad(resource: Resource): void\n    {\n        resource._onCompleteBinding = null;\n\n        // remove this resource from the async queue, and add it to our list\n        // of resources that are being parsed\n        this._resourcesParsing.push(resource);\n        resource._dequeue();\n\n        // run all the after middleware for this resource\n        eachSeries(\n            this._middleware,\n            (middleware, next) =>\n            {\n                middleware.fn.call(this, resource, next);\n            },\n            () =>\n            {\n                resource.onAfterMiddleware.dispatch(resource);\n\n                this.progress = Math.min(MAX_PROGRESS, this.progress + resource.progressChunk);\n                this.onProgress.dispatch(this, resource);\n\n                if (resource.error)\n                    this.onError.dispatch(resource.error, this, resource);\n                else\n                    this.onLoad.dispatch(this, resource);\n\n                this._resourcesParsing.splice(this._resourcesParsing.indexOf(resource), 1);\n\n                // do completion check\n                if (this._queue.idle() && this._resourcesParsing.length === 0)\n                    this._onComplete();\n            },\n            true);\n    }\n\n    /**\n     * A default array of middleware to run after loading each resource.\n     * Each of these middlewares are added to any new Loader instances when they are created.\n     */\n    private static _defaultMiddleware: Middleware[] = [];\n\n    /**\n     * Sets up a middleware function that will run *after* the\n     * resource is loaded.\n     *\n     * You can optionally specify a priority for this middleware\n     * which will determine the order middleware functions are run.\n     * A lower priority value will make the function run earlier.\n     * That is, priority 30 is run before priority 50.\n     */\n    static use(fn: Loader.MiddlewareFn, priority = Loader.DefaultMiddlewarePriority): typeof Loader\n    {\n        Loader._defaultMiddleware.push({ fn, priority });\n        Loader._defaultMiddleware.sort((a, b) => a.priority - b.priority);\n        return Loader;\n    }\n}\n"],"names":["Signal","ResourceType","ResourceState","XhrResponseType"],"mappings":"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"}